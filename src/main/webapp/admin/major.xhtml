<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
   <title>University System -Courses Management</title>
   <h:outputStylesheet name="studentstyle.css" library="css" />
</h:head>


<h:body>

   <ui:include src="/template/header.xhtml"/>

   <br/>
   <p:messages id="messages" closable="true" showDetail="true" autoUpdate="true"/>


   <p:commandButton
           value="Add Major"
           actionListener="#{majorBean.resetForm()}"
           update=":majorForm"
           oncomplete="PF('majorDialog').show();"
           styleClass="ui-button-success"
   />

   <br/>
   <br/>

   <h:form id="mainForm">
      <p:dataTable id="majorTable" value="#{majorBean.getMajorList()}"
                   var="major" rows="15" responsiveLayout="scroll"
                   styleClass="courses-table custom-datatable" rowHover="true">

         <p:column headerText="ID">#{major.id}</p:column>
         <p:column headerText="Name">#{major.name}</p:column>

         <p:column headerText="Actions">
            <p:commandButton icon="pi pi-trash" title="Delete"
                             actionListener="#{majorBean.deleteMajor(major)}"
                             update=":mainForm:majorTable :messages"
                             onclick="return confirm('Are you sure you want to delete this Major?');"
                             styleClass="ui-button-danger"
                             padding="5"
            />

            <p:commandButton icon="pi pi-pencil" title="edit"
                             actionListener="#{majorBean.setSelectedMajor(major)}"
                             update=":majorForm"
                             oncomplete="PF('majorDialog').show();"
                             styleClass="ui-button-warning"
                             padding="5"
            />
         </p:column>

      </p:dataTable>
   </h:form>



   <p:dialog header="Add/Edit Major" widgetVar="majorDialog"
             modal="true" width="400" resizable="false">
      <h:form id="majorForm">
         <p:panelGrid columns="2">
            <p:outputLabel for="name" value="Name"/>
            <p:inputText id="name" value="#{majorBean.selectedMajor.name}"/>

            <p:commandButton value="Save"
                             action="#{majorBean.saveMajor()}"
                             update=":mainForm:majorTable :messages"
                             oncomplete="PF('majorDialog').hide();"
                             style="margin-top:10px;" />
         </p:panelGrid>
      </h:form>


   </p:dialog>

   <br/>
   <br/>
   <br/>

   <ui:include src="/template/footer.xhtml"/>
</h:body>

</html>
