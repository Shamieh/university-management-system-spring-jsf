<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

<h:head>
    <title>University System -Courses Management</title>
    <h:outputStylesheet name="studentstyle.css" library="css" />
</h:head>


<h:body>

<ui:include src="/template/header.xhtml"/>

<br/>
        <p:messages id="messages" closable="true" showDetail="true" autoUpdate="true"/>

    <p:commandButton
    value="Add Faculty"
    actionListener="#{facultyBean.resetForm()}"
    update=":facultyForm"
    oncomplete="PF('facultyDialog').show();"
    styleClass="ui-button-success"
    />

    <br/>
    <br/>

    <h:form id="mainForm">


        <p:dataTable id="facultyTable" value="#{facultyBean.getFacultyList()}"
                     var="faculty" rows="15" responsiveLayout="scroll"
                     styleClass="courses-table custom-datatable" rowHover="true">

            <p:column headerText="ID">#{faculty.id}</p:column>
            <p:column headerText="Name">#{faculty.name}</p:column>

            <p:column headerText="Actions">
                <p:commandButton icon="pi pi-trash" title="Delete"
                                 actionListener="#{facultyBean.deleteFaculty(faculty)}"
                                 update=":mainForm:facultyTable :messages"
                                 onclick="return confirm('Are you sure you want to delete this faculty?');"
                                 styleClass="ui-button-danger"
                                 padding="5"
                />

                <p:commandButton icon="pi pi-pencil" title="edit"
                                 actionListener="#{facultyBean.setSelectedFaculty(faculty)}"
                                 update=":facultyForm"
                                 oncomplete="PF('facultyDialog').show();"
                                 styleClass="ui-button-warning"
                                 padding="5"
                />
            </p:column>

        </p:dataTable>
    </h:form>



    <p:dialog header="Add/Edit Faculty" widgetVar="facultyDialog"
              modal="true" width="500" resizable="false">
        <h:form id="facultyForm">
            <p:panelGrid columns="2" >
                <p:outputLabel for="name" value="Name"/>
                <p:inputText id="name" value="#{facultyBean.selectedFaculty.name}"
                required="true"/>

            </p:panelGrid>
                <p:commandButton value="Save"
                                 action="#{facultyBean.saveFaculty()}"
                                 update=":mainForm:facultyTable :messages"
                                 oncomplete="PF('facultyDialog').hide();"
                                 style="margin-top: 20px; text-align: right;" />
        </h:form>


    </p:dialog>
    <br/>
    <br/>
    <br/>

    <ui:include src="/template/footer.xhtml"/>
</h:body>

</html>
